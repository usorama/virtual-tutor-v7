@import "tailwindcss";
@import '@tldraw/tldraw/tldraw.css';
@import 'katex/dist/katex.min.css';

:root {
  --background: #ffffff;
  --foreground: #020617;
  --card: #ffffff;
  --card-foreground: #020617;
  --popover: #ffffff;
  --popover-foreground: #020617;
  --primary: #0f172a;
  --primary-foreground: #f8fafc;
  --secondary: #f1f5f9;
  --secondary-foreground: #0f172a;
  --muted: #f1f5f9;
  --muted-foreground: #64748b;
  --accent: #f1f5f9;
  --accent-foreground: #0f172a;
  --destructive: #ef4444;
  --destructive-foreground: #f8fafc;
  --border: #e2e8f0;
  --input: #e2e8f0;
  --ring: #020617;
  --radius: 0.5rem;

  /* PingLearn Brand Colors */
  --ping-primary: #0066ff;        /* Vibrant blue for technology */
  --ping-secondary: #ff6b35;      /* Orange for education/energy */
  --ping-accent: #00d4aa;         /* Teal for voice/audio */
  --ping-dark: #1a1a1a;          /* Professional dark */
  --ping-light: #f8fafc;         /* Clean light */

  /* PingLearn Glassmorphism Integration */
  --ping-glass-primary: rgba(0, 102, 255, 0.1);
  --ping-glass-secondary: rgba(255, 107, 53, 0.1);
  --ping-glass-accent: rgba(0, 212, 170, 0.1);

  /* Voice-specific effects */
  --ping-voice-glow: 0 0 20px rgba(0, 212, 170, 0.3);
  --ping-tech-shadow: 0 8px 32px rgba(0, 102, 255, 0.2);

  /* Glassmorphism Custom Properties */
  --glass-blur: 10px;
  --glass-opacity: 0.1;
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-shadow: rgba(0, 0, 0, 0.1);
  --glass-bg: rgba(255, 255, 255, 0.1);

  /* Responsive Blur Values */
  --glass-blur-sm: 6px;
  --glass-blur-md: 10px;
  --glass-blur-lg: 16px;

  /* Glass Gradients */
  --glass-gradient: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
  --glass-border-gradient: linear-gradient(145deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.1));
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #020617;
    --foreground: #f8fafc;
    --card: #020617;
    --card-foreground: #f8fafc;
    --popover: #020617;
    --popover-foreground: #f8fafc;
    --primary: #f8fafc;
    --primary-foreground: #0f172a;
    --secondary: #1e293b;
    --secondary-foreground: #f8fafc;
    --muted: #1e293b;
    --muted-foreground: #94a3b8;
    --accent: #1e293b;
    --accent-foreground: #f8fafc;
    --destructive: #7f1d1d;
    --destructive-foreground: #f8fafc;
    --border: #1e293b;
    --input: #1e293b;
    --ring: #cbd5e1;

    /* Dark Mode Glassmorphism */
    --glass-bg: rgba(0, 0, 0, 0.2);
    --glass-border: rgba(255, 255, 255, 0.1);
    --glass-shadow: rgba(0, 0, 0, 0.3);
    --glass-gradient: linear-gradient(145deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
    --glass-border-gradient: linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
  }
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
}

* {
  border-color: var(--border);
}

body {
  background: var(--background);
  color: var(--foreground);
}

/* Mobile-first Responsive Glassmorphism */
@media (max-width: 768px) {
  :root {
    --glass-blur: var(--glass-blur-sm);
    --glass-opacity: 0.15; /* Stronger on mobile for better visibility */
  }
}

/* Apple Liquid Glass Material System */
.liquid-glass {
  /* 3D Perspective and Layering */
  transform-style: preserve-3d;
  perspective: 1000px;
  position: relative;
  overflow: hidden;

  /* Multi-layer Glass Background */
  background:
    /* Specular highlight layer */
    radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
      rgba(255, 255, 255, 0.4) 0%,
      rgba(255, 255, 255, 0.1) 30%,
      transparent 70%),
    /* Primary glass layer */
    linear-gradient(135deg,
      rgba(255, 255, 255, 0.15),
      rgba(255, 255, 255, 0.05) 50%,
      transparent 80%),
    /* Secondary refraction layer */
    linear-gradient(225deg,
      transparent,
      rgba(255, 255, 255, 0.08) 40%,
      rgba(255, 255, 255, 0.03)),
    /* Content-adaptive base */
    var(--adaptive-glass-color, rgba(255, 255, 255, 0.08));

  /* Advanced Backdrop Effects */
  backdrop-filter:
    blur(20px)
    saturate(180%)
    contrast(120%)
    brightness(110%);

  /* Dynamic Border with Refraction */
  border: 1px solid transparent;
  border-image:
    linear-gradient(135deg,
      rgba(255, 255, 255, 0.5) 0%,
      rgba(255, 255, 255, 0.2) 50%,
      rgba(255, 255, 255, 0.1) 100%) 1;

  /* Advanced Shadow System */
  box-shadow:
    /* Inner glass reflection */
    inset 0 1px 0 rgba(255, 255, 255, 0.3),
    inset 0 -1px 0 rgba(255, 255, 255, 0.1),
    /* Primary depth shadow */
    0 8px 32px rgba(0, 0, 0, 0.12),
    /* Secondary ambient shadow */
    0 2px 8px rgba(0, 0, 0, 0.08),
    /* Specular highlight */
    0 0 0 1px rgba(255, 255, 255, 0.05);

  /* Glass Transformation */
  transform: translateZ(0);
  will-change: transform, background, backdrop-filter;
}

/* Moving Specular Highlight Overlay */
.liquid-glass::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background:
    radial-gradient(circle at center,
      rgba(255, 255, 255, 0.6) 0%,
      rgba(255, 255, 255, 0.2) 20%,
      transparent 60%);
  transform:
    translate(
      calc(var(--mouse-x, 0) * 0.5),
      calc(var(--mouse-y, 0) * 0.5)
    )
    rotate(var(--glass-rotation, 0deg));
  pointer-events: none;
  opacity: var(--highlight-opacity, 0);
  transition: opacity 0.3s ease, transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Liquid Glass Card Variant */
.liquid-glass-card {
  /* Inherit all liquid-glass properties */
  transform-style: preserve-3d;
  perspective: 1000px;
  position: relative;
  overflow: hidden;

  background:
    radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
      rgba(255, 255, 255, 0.4) 0%,
      rgba(255, 255, 255, 0.1) 30%,
      transparent 70%),
    linear-gradient(135deg,
      rgba(255, 255, 255, 0.15),
      rgba(255, 255, 255, 0.05) 50%,
      transparent 80%),
    linear-gradient(225deg,
      transparent,
      rgba(255, 255, 255, 0.08) 40%,
      rgba(255, 255, 255, 0.03)),
    var(--adaptive-glass-color, rgba(255, 255, 255, 0.08));

  backdrop-filter: blur(20px) saturate(180%) contrast(120%) brightness(110%);
  border: 1px solid transparent;
  border-image: linear-gradient(135deg,
    rgba(255, 255, 255, 0.5) 0%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.1) 100%) 1;

  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.3),
    inset 0 -1px 0 rgba(255, 255, 255, 0.1),
    0 8px 32px rgba(0, 0, 0, 0.12),
    0 2px 8px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(255, 255, 255, 0.05);

  border-radius: 1rem;
  transform: translateZ(10px);
  will-change: transform, background, backdrop-filter;
}

/* Liquid Glass Button Variant */
.liquid-glass-button {
  /* Inherit all liquid-glass properties */
  transform-style: preserve-3d;
  perspective: 1000px;
  position: relative;
  overflow: hidden;

  background:
    radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
      rgba(255, 255, 255, 0.4) 0%,
      rgba(255, 255, 255, 0.1) 30%,
      transparent 70%),
    linear-gradient(135deg,
      rgba(255, 255, 255, 0.15),
      rgba(255, 255, 255, 0.05) 50%,
      transparent 80%),
    linear-gradient(225deg,
      transparent,
      rgba(255, 255, 255, 0.08) 40%,
      rgba(255, 255, 255, 0.03)),
    var(--adaptive-glass-color, rgba(255, 255, 255, 0.08));

  backdrop-filter: blur(20px) saturate(180%) contrast(120%) brightness(110%);
  border: 1px solid transparent;
  border-image: linear-gradient(135deg,
    rgba(255, 255, 255, 0.5) 0%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.1) 100%) 1;

  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.3),
    inset 0 -1px 0 rgba(255, 255, 255, 0.1),
    0 8px 32px rgba(0, 0, 0, 0.12),
    0 2px 8px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(255, 255, 255, 0.05);

  border-radius: 0.75rem;
  transform: translateZ(5px);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform, background, backdrop-filter;
}

.liquid-glass-button:hover {
  transform: translateZ(15px) scale(1.02);
  backdrop-filter:
    blur(25px)
    saturate(200%)
    contrast(130%)
    brightness(120%);
  --highlight-opacity: 1;
}

/* Liquid Glass Navigation */
.liquid-glass-nav {
  /* Inherit all liquid-glass properties */
  transform-style: preserve-3d;
  perspective: 1000px;
  position: relative;
  overflow: hidden;

  background:
    radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
      rgba(255, 255, 255, 0.4) 0%,
      rgba(255, 255, 255, 0.1) 30%,
      transparent 70%),
    linear-gradient(135deg,
      rgba(255, 255, 255, 0.15),
      rgba(255, 255, 255, 0.05) 50%,
      transparent 80%),
    linear-gradient(225deg,
      transparent,
      rgba(255, 255, 255, 0.08) 40%,
      rgba(255, 255, 255, 0.03)),
    var(--adaptive-glass-color, rgba(255, 255, 255, 0.08));

  backdrop-filter: blur(40px) saturate(200%) contrast(110%);
  border: 1px solid transparent;
  border-image: linear-gradient(135deg,
    rgba(255, 255, 255, 0.5) 0%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.1) 100%) 1;

  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.3),
    inset 0 -1px 0 rgba(255, 255, 255, 0.1),
    0 8px 32px rgba(0, 0, 0, 0.12),
    0 2px 8px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(255, 255, 255, 0.05);

  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  transform: translateZ(20px);
  will-change: transform, background, backdrop-filter;
}

/* Dark Mode Adaptations */
@media (prefers-color-scheme: dark) {
  .liquid-glass,
  .liquid-glass-card,
  .liquid-glass-button,
  .liquid-glass-nav {
    background:
      /* Dark mode specular highlight */
      radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
        rgba(255, 255, 255, 0.3) 0%,
        rgba(255, 255, 255, 0.08) 30%,
        transparent 70%),
      /* Dark glass layers */
      linear-gradient(135deg,
        rgba(255, 255, 255, 0.1),
        rgba(255, 255, 255, 0.03) 50%,
        transparent 80%),
      linear-gradient(225deg,
        transparent,
        rgba(255, 255, 255, 0.05) 40%,
        rgba(255, 255, 255, 0.02)),
      /* Dark adaptive base */
      var(--adaptive-glass-color, rgba(0, 0, 0, 0.15));

    border-image:
      linear-gradient(135deg,
        rgba(255, 255, 255, 0.3) 0%,
        rgba(255, 255, 255, 0.1) 50%,
        rgba(255, 255, 255, 0.05) 100%) 1;

    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.2),
      inset 0 -1px 0 rgba(255, 255, 255, 0.05),
      0 8px 32px rgba(0, 0, 0, 0.3),
      0 2px 8px rgba(0, 0, 0, 0.2),
      0 0 0 1px rgba(255, 255, 255, 0.08);
  }
}
